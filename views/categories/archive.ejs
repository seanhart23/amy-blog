<% include ../partials/header %>

<div class='ui container'>
    <h2 class='category'>Archive</h2>
    <div class="ui stackable mobile grid">
        <div class="twelve wide column">
            <div class="ui stackable four column grid">
                <% blogs.sort(blogs.created).reverse().forEach(function(blog){ %>
                    <% var date = new Date(blog.created); %>
                    <% var options = {month: "long", day: "numeric", year: "numeric"};%>  
                    <div class='column'>
                        <div id='blogTile'>
                            <span id='previewDate'><%= date.toLocaleDateString('en-us', options) %></span>
                            <h4 class="item" id='previewTitle'><%= blog.title %></h4>
                            <div class="item">
                                <img src="<%= blog.image %>" class="ui fluid image"  id='blogTileImage'>
                            </div>
                            <div class="item">
                                <a href="/posts/<%= blog._id %>" class='ui default button' id='blogTileButton'>View Post</a>
                            </div>
                            <div class='item' id='previewCommentCount'>
                                <%= blog.comments.length %> <% if(blog.comments.length === 1){ %>Comment
                                <% } else { %>Comments<% } %>
                            </div>
                        </div>
                    </div>
                <% }) %>
            </div>
        </div>
        <% include ../partials/rightrail %>
        <br>
    </div>
    <% include ../partials/footer %>
</div>